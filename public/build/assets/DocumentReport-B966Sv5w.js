import{r as o,a as w,s as S,j as e,Q as b,B as T,h as I}from"./app-mk9C7I_N.js";import{A as k,a as v}from"./AdminLayout-CSpn-5iP.js";import{B as n}from"./Breadcrumb-Ceo11VVb.js";import{C as L}from"./index-DZTYDYFc.js";import{I as N}from"./index-BiMKBPmP.js";import{R as $}from"./SearchOutlined-jGh7iI3q.js";import{F as R}from"./Table-CR7r1NXs.js";import{T as z}from"./index-DDFZ7dy0.js";import{T as s}from"./index-DUw4RcKT.js";import"./UserOutlined-Do6ZzMFA.js";import"./index-D66KGu5D.js";import"./index-phC_QXgK.js";import"./EllipsisOutlined-DwAdn_jY.js";import"./PurePanel-Bwrv9FGC.js";import"./index-pKRxIKW4.js";import"./InboxOutlined-CDGQXwno.js";import"./DownOutlined-CUiMnNSy.js";import"./useVariants-BUy45nvZ.js";import"./getAllowClear-BGHWSs2V.js";import"./Input-DUxd1TpC.js";import"./EyeOutlined-CQ17cMyg.js";import"./EditOutlined-CkdCVUZ6.js";import"./addEventListener-KCP_u9m-.js";import"./index-CHP0fo2g.js";import"./useIcons-CunuZG3Y.js";import"./CheckOutlined-CeCjh9xi.js";import"./index-Bl_0AmJC.js";import"./Pagination-DbG4IO0G.js";import"./index-CYzbL2Oe.js";import"./FileOutlined-BPRx6OYG.js";import"./FolderOutlined-C4h6UTTq.js";const{Title:B,Text:E}=z;function ue({auth:m}){const[i,p]=o.useState([]),[u,l]=o.useState(!1),[a,x]=o.useState(""),[c,h]=o.useState({current:1,pageSize:15,total:0});o.useEffect(()=>{d(1)},[]);const d=async(t=1)=>{l(!0);try{const r=await w.get("/api/reports/document",{params:{page:t,per_page:15}});p(r.data.data),h({current:r.data.current_page,pageSize:r.data.per_page,total:r.data.total})}catch(r){console.error("Error fetching contracts:",r),S.error("មានបញ្ហាក្នុងការទាញយកកិច្ចសន្យា")}finally{l(!1)}},f=()=>i.filter(r=>r.contract_id.toLowerCase().includes(a.toLowerCase())||r.seller_name.toLowerCase().includes(a.toLowerCase())||r.land_plot_number.toLowerCase().includes(a.toLowerCase())),g=t=>{I.visit(`/documents/${t}`)},j=t=>{d(t.current)},y=t=>{switch(t){case"active":return e.jsx(s,{color:"green",children:"សកម្ម"});case"completed":return e.jsx(s,{color:"blue",children:"បានបញ្ចប់"});case"cancelled":return e.jsx(s,{color:"red",children:"បានលុបចោល"});default:return e.jsx(s,{color:"default",children:t})}},C=[{title:"លេខកិច្ចសន្យា",dataIndex:"contract_id",key:"contract_id",render:(t,r)=>e.jsx(T,{type:"link",onClick:()=>g(t),style:{padding:0,fontWeight:"bold",color:"#1890ff"},children:t})},{title:"ឈ្មោះអ្នកលក់",dataIndex:"seller_name",key:"seller_name"},{title:"លេខក្បែងដី",dataIndex:"land_plot_number",key:"land_plot_number"},{title:"ចំនួនទឹកប្រាក់សរុប",dataIndex:"total_amount",key:"total_amount",render:t=>`$${parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2})}`},{title:"កាលបរិច្ឆេទកិច្ចសន្យា",dataIndex:"contract_date",key:"contract_date"},{title:"ស្ថានភាព",dataIndex:"status",key:"status",render:t=>y(t)}],_=a?f():i;return e.jsxs(k,{user:m.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"របាយការណ៍កិច្ចសន្យា"}),children:[e.jsx(b,{title:"របាយការណ៍កិច្ចសន្យា"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(n,{className:"mb-6",children:[e.jsx(n.Item,{children:"របាយការណ៍"}),e.jsx(n.Item,{children:"បញ្ជីកិច្ចសន្យា"})]}),e.jsxs(L,{title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{level:4,className:"m-0",children:[e.jsx(v,{className:"mr-2"}),"បញ្ជីកិច្ចសន្យាលក់ដី"]}),e.jsxs(E,{type:"secondary",children:["សរុប: ",c.total," កិច្ចសន្យា"]})]}),className:"mb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(N,{placeholder:"ស្វែងរកតាមលេខកិច្ចសន្យា, ឈ្មោះអ្នកលក់, ឬលេខក្បែងដី...",value:a,onChange:t=>x(t.target.value),style:{width:"400px"},prefix:e.jsx($,{}),allowClear:!0})}),e.jsx(R,{columns:C,dataSource:_,rowKey:"id",loading:u,pagination:{...c,showSizeChanger:!1,showQuickJumper:!0,showTotal:(t,r)=>`បង្ហាញ ${r[0]}-${r[1]} នៃ ${t} កិច្ចសន្យា`},onChange:j,size:"middle",scroll:{x:800}})]})]})})]})}export{ue as default};
