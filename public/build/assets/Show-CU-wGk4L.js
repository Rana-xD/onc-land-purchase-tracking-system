import{r as p,j as e,Q as R,t as y,S as d,d as S}from"./app-D0OhDuOP.js";import{A as T}from"./AdminLayout-DfyZC7U7.js";import{B as N}from"./Breadcrumb-XIs-K6bQ.js";import{C as l}from"./index-BXZQm44E.js";import{R as x,C as a}from"./row-Cvvd4www.js";import{T as k}from"./index-DUD5X347.js";import{S as $}from"./index-CpY42lHj.js";import{B as h}from"./index-XQ9uBlxv.js";import{R as P}from"./ArrowLeftOutlined-DaEIyD4l.js";import{R as B}from"./EditOutlined-BQAB7wjt.js";import{P as D}from"./index-BLwNk9Dd.js";import{R as F}from"./DeleteOutlined-C5fTVnAq.js";import{D as t}from"./index-orZlTmla.js";import{T as b}from"./index-DxlGwFBo.js";import{I as v}from"./index-CXWQQlPC.js";import{D as E}from"./index-BoUcoXbW.js";import{M as L}from"./index-DSx0c0nZ.js";import{R as M}from"./FilePdfOutlined-BmX1d_m5.js";import{R as z}from"./FileOutlined-CmtzEeI9.js";import"./UserOutlined-Bw1Yg3TV.js";import"./index-BKPGZTnh.js";import"./EllipsisOutlined-BcUT9_x5.js";import"./PurePanel-BrlMViLC.js";import"./pickAttrs-BMtZpb9Y.js";import"./DownOutlined-BKT6hG3e.js";import"./Skeleton-BB1PfEPR.js";import"./CloseOutlined-CSg-7HVH.js";import"./useVariants-VmmnPvRy.js";import"./index-BNYa27A7.js";import"./getAllowClear-7r21EHJH.js";import"./CheckOutlined-C-W3vkf9.js";import"./ExclamationCircleFilled-BuCwC-hN.js";import"./ActionButton-DPI_9ZHB.js";import"./useClosable-rmjEiMr1.js";import"./extendsObject-78o_rR5W.js";import"./EyeOutlined-Bk9sN1n5.js";import"./addEventListener-Dvq9iQDE.js";import"./InfoCircleFilled-Csbq1HVY.js";const{Title:A,Text:j}=k;function Q({buyer:s,documents:r}){const[w,f]=p.useState(!1),[n,_]=p.useState(""),[m,I]=p.useState(""),C=async()=>{try{await S.delete(`/api/buyers/${s.id}`),d.visit(route("data-entry.buyers.index"),{onSuccess:()=>{message.success("អ្នកទិញត្រូវបានលុបដោយជោគជ័យ")}})}catch(i){console.error("Error deleting buyer:",i),i.response&&i.response.status===403?message.error("អ្នកមិនមានសិទ្ធិលុបទិន្នន័យអ្នកទិញ"):message.error("មានបញ្ហាក្នុងការលុបអ្នកទិញ")}},c=i=>{_(`/storage/${i.file_path}`),I(i.file_name),f(!0)},g=i=>{const o=i.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(o)?null:o==="pdf"?e.jsx(M,{style:{fontSize:"24px"}}):e.jsx(z,{style:{fontSize:"24px"}})},u=i=>{const o=i.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(o)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"ព័ត៌មានលម្អិតអ្នកទិញ"}),e.jsxs("div",{className:"buyer-show",children:[e.jsx(N,{items:[{title:e.jsx(y,{href:route("data-entry.index"),children:"ជ្រើសរើសប្រភេទទិន្នន័យ"})},{title:e.jsx(y,{href:route("data-entry.buyers.index"),children:"បញ្ជីអ្នកទិញ"})},{title:"ព័ត៌មានលម្អិតអ្នកទិញ"}],className:"mb-6"}),e.jsxs(l,{children:[e.jsxs(x,{justify:"space-between",align:"middle",className:"mb-6",children:[e.jsx(a,{children:e.jsx(A,{level:4,className:"khmer-heading m-0",children:"ព័ត៌មានលម្អិតអ្នកទិញ"})}),e.jsx(a,{children:e.jsxs($,{children:[e.jsx(h,{icon:e.jsx(P,{}),onClick:()=>d.visit(route("data-entry.buyers.index")),children:"ត្រឡប់ក្រោយ"}),e.jsx(h,{type:"primary",icon:e.jsx(B,{}),onClick:()=>d.visit(route("data-entry.buyers.edit",s.id)),children:"កែប្រែ"}),e.jsx(D,{title:"តើអ្នកពិតជាចង់លុបអ្នកទិញនេះមែនទេ?",onConfirm:C,okText:"យល់ព្រម",cancelText:"បោះបង់",children:e.jsx(h,{danger:!0,icon:e.jsx(F,{}),children:"លុប"})})]})})]}),e.jsxs(x,{gutter:[24,24],children:[e.jsx(a,{xs:24,md:16,children:e.jsx(l,{title:"ព័ត៌មានអ្នកទិញ",className:"mb-6",children:e.jsxs(t,{bordered:!0,column:{xs:1,sm:2},children:[e.jsx(t.Item,{label:"ឈ្មោះ",children:s.name}),e.jsx(t.Item,{label:"ភេទ",children:e.jsx(b,{color:s.sex==="male"?"blue":"pink",children:s.sex==="male"?"ប្រុស":"ស្រី"})}),e.jsx(t.Item,{label:"ថ្ងៃខែឆ្នាំកំណើត",children:s.date_of_birth}),e.jsx(t.Item,{label:"លេខអត្តសញ្ញាណប័ណ្ណ",children:s.identity_number}),e.jsx(t.Item,{label:"អាសយដ្ឋាន",span:2,children:s.address}),e.jsx(t.Item,{label:"លេខទូរស័ព្ទ",children:s.phone_number}),e.jsx(t.Item,{label:"បង្កើតនៅ",children:s.created_at}),e.jsx(t.Item,{label:"កែប្រែនៅ",children:s.updated_at})]})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(l,{title:"ឯកសារបង្ហាញ",className:"mb-6",children:r&&r.filter(i=>i.is_display).length>0?r.filter(i=>i.is_display).map(i=>e.jsx("div",{className:"display-document",children:u(i.file_name)?e.jsx(v,{src:`/storage/${i.file_path}`,alt:i.file_name,style:{width:"100%"},preview:!1,onClick:()=>c(i)}):e.jsxs("div",{className:"document-preview-box",onClick:()=>c(i),children:[g(i.file_name),e.jsx(j,{children:i.file_name})]})},i.id)):e.jsx(j,{type:"secondary",children:"គ្មានឯកសារបង្ហាញ"})})})]}),e.jsx(E,{}),e.jsx(l,{title:"ឯកសារទាំងអស់",children:e.jsx(x,{gutter:[16,16],children:r&&r.length>0?r.map(i=>e.jsx(a,{xs:24,sm:12,md:8,lg:6,children:e.jsx(l,{hoverable:!0,cover:u(i.file_name)?e.jsx(v,{src:`/storage/${i.file_path}`,alt:i.file_name,style:{height:150,objectFit:"cover"},preview:!1}):e.jsx("div",{className:"document-icon-container",children:g(i.file_name)}),onClick:()=>c(i),children:e.jsx(l.Meta,{title:i.file_name,description:e.jsx(e.Fragment,{children:i.is_display&&e.jsx(b,{color:"blue",children:"ឯកសារបង្ហាញ"})})})})},i.id)):e.jsx(a,{span:24,children:e.jsx(j,{type:"secondary",children:"គ្មានឯកសារ"})})})})]}),e.jsx(L,{open:w,title:m,footer:null,onCancel:()=>f(!1),width:800,children:n&&(n.endsWith(".pdf")?e.jsx("iframe",{src:n,style:{width:"100%",height:"500px"},title:m}):e.jsx("img",{alt:m,style:{width:"100%"},src:n}))})]})]})}Q.layout=s=>e.jsx(T,{title:"ព័ត៌មានលម្អិតអ្នកទិញ",children:s});export{Q as default};
