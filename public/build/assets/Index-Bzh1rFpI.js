import{r as l,j as e,Q as $,t as j,B as h,h as y,a as S,s as u}from"./app-mk9C7I_N.js";import{A as B}from"./AdminLayout-CSpn-5iP.js";import{B as E}from"./Breadcrumb-Ceo11VVb.js";import{C as D,R as N}from"./index-DZTYDYFc.js";import{R as P,C as g}from"./row-CPFUowx7.js";import{T as v}from"./index-DDFZ7dy0.js";import{S as z}from"./index-pKRxIKW4.js";import{I as F}from"./index-BiMKBPmP.js";import{R as L}from"./SearchOutlined-jGh7iI3q.js";import{T as f}from"./index-phC_QXgK.js";import{F as A}from"./Table-CR7r1NXs.js";import{T as O}from"./index-DUw4RcKT.js";import{R as Q}from"./EditOutlined-CkdCVUZ6.js";import{P as q}from"./index-D2FKLp4I.js";import{R as K}from"./DeleteOutlined-CQidAT13.js";import"./UserOutlined-Do6ZzMFA.js";import"./index-D66KGu5D.js";import"./EllipsisOutlined-DwAdn_jY.js";import"./PurePanel-Bwrv9FGC.js";import"./InboxOutlined-CDGQXwno.js";import"./DownOutlined-CUiMnNSy.js";import"./useVariants-BUy45nvZ.js";import"./getAllowClear-BGHWSs2V.js";import"./CheckOutlined-CeCjh9xi.js";import"./Input-DUxd1TpC.js";import"./EyeOutlined-CQ17cMyg.js";import"./addEventListener-KCP_u9m-.js";import"./index-CHP0fo2g.js";import"./useIcons-CunuZG3Y.js";import"./index-Bl_0AmJC.js";import"./Pagination-DbG4IO0G.js";import"./index-CYzbL2Oe.js";import"./FileOutlined-BPRx6OYG.js";import"./FolderOutlined-C4h6UTTq.js";const{Title:M}=v;function G({sellers:o,pagination:i}){const[T,c]=l.useState(!1),[x,I]=l.useState(""),[b,m]=l.useState([]),[a,d]=l.useState({current:1,pageSize:10,total:0});l.useEffect(()=>{o&&m(o),i&&d({current:i.current_page,pageSize:i.per_page,total:i.total})},[o,i]);const _=t=>{I(t),p(1,a.pageSize,t)},w=t=>{d(r=>({...r,current:t.current,pageSize:t.pageSize})),p(t.current,t.pageSize,x)},p=async(t,r,R="")=>{c(!0);try{const n=r||a.pageSize||10,s=await S.get("/api/sellers",{params:{page:t,per_page:n,search:R}});s.data&&s.data.data?m(s.data.data):m([]),s.data&&s.data.meta?d({current:s.data.meta.current_page||1,pageSize:n,total:s.data.meta.total||0}):d({current:1,pageSize:n,total:0})}catch(n){console.error("Error fetching sellers:",n),u.error("មានបញ្ហាក្នុងការទាញយកទិន្នន័យអ្នកលក់"),m([])}finally{c(!1)}},k=async t=>{c(!0);try{await S.delete(`/api/sellers/${t}`),u.success("បានលុបទិន្នន័យអ្នកលក់ដោយជោគជ័យ"),p(a.current,a.pageSize,x)}catch(r){console.error("Error deleting seller:",r),u.error("មានបញ្ហាក្នុងការលុបទិន្នន័យអ្នកលក់")}finally{c(!1)}},C=[{title:"ឈ្មោះ",dataIndex:"name",key:"name",render:(t,r)=>e.jsx(j,{href:route("data-entry.sellers.show",r.id),children:t})},{title:"ភេទ",dataIndex:"sex",key:"sex",render:t=>e.jsx(O,{color:t==="male"?"blue":"pink",children:t==="male"?"ប្រុស":"ស្រី"})},{title:"ថ្ងៃខែឆ្នាំកំណើត",dataIndex:"date_of_birth",key:"date_of_birth",render:t=>t?new Date(t).toISOString().split("T")[0]:""},{title:"លេខអត្តសញ្ញាណប័ណ្ណ",dataIndex:"identity_number",key:"identity_number"},{title:"លេខទូរស័ព្ទ",dataIndex:"phone_number",key:"phone_number"},{title:"សកម្មភាព",key:"action",render:(t,r)=>e.jsxs(z,{size:"small",children:[e.jsx(f,{title:"កែប្រែព័ត៌មានអ្នកលក់",children:e.jsx(h,{type:"default",icon:e.jsx(Q,{}),size:"small",onClick:()=>y.visit(route("data-entry.sellers.edit",r.id))})}),e.jsx(q,{title:"តើអ្នកពិតជាចង់លុបទិន្នន័យនេះមែនទេ?",onConfirm:()=>k(r.id),okText:"យល់ព្រម",cancelText:"បោះបង់",children:e.jsx(f,{title:"លុបព័ត៌មានអ្នកលក់",children:e.jsx(h,{type:"default",danger:!0,icon:e.jsx(K,{}),size:"small"})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsx($,{title:"បញ្ជីអ្នកលក់"}),e.jsxs("div",{className:"sellers-list",children:[e.jsx(E,{items:[{title:e.jsx(j,{href:route("data-entry.index"),children:"ជ្រើសរើសប្រភេទទិន្នន័យ"})},{title:"បញ្ជីអ្នកលក់"}],className:"mb-6"}),e.jsxs(D,{children:[e.jsxs(P,{justify:"space-between",align:"middle",className:"mb-4",children:[e.jsx(g,{children:e.jsx(M,{level:4,className:"khmer-heading m-0",children:"បញ្ជីអ្នកលក់"})}),e.jsx(g,{children:e.jsxs(z,{children:[e.jsx(F.Search,{placeholder:"ស្វែងរក...",allowClear:!0,enterButton:e.jsx(L,{}),onSearch:_,style:{width:250}}),e.jsx(f,{title:"បន្ថែមអ្នកលក់ថ្មី",children:e.jsx(h,{type:"primary",icon:e.jsx(N,{}),onClick:()=>y.visit(route("data-entry.sellers.create")),children:"បន្ថែមថ្មី"})})]})})]}),e.jsx(A,{columns:C,dataSource:b,rowKey:"id",loading:T,pagination:{current:a.current,pageSize:a.pageSize,total:a.total,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:(t,r)=>`${r[0]}-${r[1]} នៃ ${t} ធាតុ`},onChange:w})]})]})]})}G.layout=o=>e.jsx(B,{title:"បញ្ជីអ្នកលក់",children:o});export{G as default};
