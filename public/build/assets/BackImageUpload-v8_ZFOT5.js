import{r as o,j as e,B as y,s as r}from"./app-Cq9T9vxM.js";import{T as U}from"./index-B236O7Xl.js";import{C}from"./index-0lybEGve.js";import{T as f}from"./index-DPFVXnL-.js";import{T as S}from"./index-C_oXb-ri.js";import{R as M}from"./EyeOutlined-CFXJhbVH.js";import{R as L}from"./DeleteOutlined-j2tGMUPF.js";import{R as k}from"./FileImageOutlined-h47-aNI4.js";import{U as F}from"./index-Ut4Nl-5k.js";import{M as g}from"./index-eUbAuevc.js";import{S as O}from"./index-C_zCuArI.js";import{R as $}from"./UploadOutlined-Dnm-KKHJ.js";const{Title:D,Text:J}=U;function se({category:A,frontImage:s,onFrontImageChange:d,maxSize:a=10}){const[p,x]=o.useState(!1),[v,m]=o.useState(!1),[h,w]=o.useState(""),[u,T]=o.useState(""),N=t=>new Promise((c,i)=>{const l=new FileReader;l.readAsDataURL(t),l.onload=()=>c(l.result),l.onerror=j=>i(j)}),z=async()=>{s!=null&&s.url&&(w(s.url),m(!0),T(s.fileName||"រូបខាងមុខ"))},P=async({file:t,onSuccess:c,onError:i})=>{if(!(t.type==="image/jpeg"||t.type==="image/png")){r.error("អ្នកអាចផ្ទុកឡើងបានតែរូបភាពប្រភេទ JPG ឬ PNG ប៉ុណ្ណោះ!"),i("File type error");return}if(!(t.size/1024/1024<a)){r.error(`អ្នកអាចផ្ទុកឡើងបានតែរូបភាពទំហំតូចជាង ${a}MB ប៉ុណ្ណោះ!`),i("File size error");return}x(!0);try{const n=await N(t),R={fileName:t.name,base64:n,mimeType:t.type,size:t.size,url:n};d(R),c({success:!0}),r.success("រូបខាងមុខត្រូវបានផ្ទុកឡើងដោយជោគជ័យ")}catch(n){console.error("Error uploading front image:",n),r.error("មានបញ្ហាក្នុងការផ្ទុកឡើងរូបខាងមុខ"),i("Upload failed")}finally{x(!1)}},b=()=>{g.confirm({title:"តើអ្នកពិតជាចង់លុបរូបខាងមុខនេះមែនទេ?",content:"សកម្មភាពនេះមិនអាចត្រឡប់វិញបានទេ។",okText:"យល់ព្រម",cancelText:"បោះបង់",onOk:()=>{d(null),r.success("រូបខាងមុខត្រូវបានលុបដោយជោគជ័យ")}})},B=e.jsxs("div",{children:[e.jsx($,{}),e.jsx("div",{style:{marginTop:8},children:"ផ្ទុកឡើងរូបខាងមុខ"})]});return e.jsxs("div",{className:"front-image-upload",children:[e.jsx(D,{level:5,className:"khmer-heading mb-4",children:"រូបខាងមុខ"}),e.jsxs(J,{className:"khmer-text mb-4 block",children:["សូមផ្ទុកឡើងរូបខាងមុខ (អតិបរមា 1 រូបភាព, ទំហំអតិបរមា ",a,"MB)"]}),s&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(C,{size:"small",className:"border-2 border-blue-500",style:{width:"300px"},cover:e.jsx("div",{style:{padding:"12px",textAlign:"center",height:"180px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:s.mimeType&&s.mimeType.includes("image")?e.jsx("img",{src:s.url,alt:"រូបខាងមុខ",style:{maxHeight:"160px",maxWidth:"100%",objectFit:"contain"}}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(k,{style:{fontSize:"48px",color:"#1890ff"}}),e.jsx("div",{style:{marginTop:"8px",wordBreak:"break-word"},children:e.jsx(f,{title:s.fileName,children:s.fileName})})]})}),children:[e.jsxs("div",{style:{minHeight:"40px"},children:[e.jsx(f,{title:s.fileName,children:e.jsx("div",{style:{wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis"},children:s.fileName})}),e.jsx(S,{color:"blue",style:{marginTop:"4px"},children:"រូបខាងមុខ"})]}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between"},children:[e.jsx(y,{type:"text",icon:e.jsx(M,{}),onClick:z,size:"small"}),e.jsx(y,{type:"text",icon:e.jsx(L,{}),danger:!0,size:"small",onClick:b})]})]})}),!s&&e.jsx(F,{listType:"picture-card",fileList:[],customRequest:P,multiple:!1,maxCount:1,disabled:p,accept:".jpg,.jpeg,.png",showUploadList:!1,children:B}),e.jsx(g,{open:v,title:u,footer:null,onCancel:()=>m(!1),children:h&&e.jsx("img",{alt:u,style:{width:"100%"},src:h})}),p&&e.jsx("div",{className:"upload-loading",children:e.jsx(O,{tip:"កំពុងផ្ទុកឡើង...",size:"large",children:e.jsx("div",{className:"content"})})})]})}const{Title:G,Text:H}=U;function te({category:A,backImage:s,onBackImageChange:d,maxSize:a=10}){const[p,x]=o.useState(!1),[v,m]=o.useState(!1),[h,w]=o.useState(""),[u,T]=o.useState(""),N=t=>new Promise((c,i)=>{const l=new FileReader;l.readAsDataURL(t),l.onload=()=>c(l.result),l.onerror=j=>i(j)}),z=async()=>{s!=null&&s.url&&(w(s.url),m(!0),T(s.fileName||"រូបខាងក្រោយ"))},P=async({file:t,onSuccess:c,onError:i})=>{if(!(t.type==="image/jpeg"||t.type==="image/png")){r.error("អ្នកអាចផ្ទុកឡើងបានតែរូបភាពប្រភេទ JPG ឬ PNG ប៉ុណ្ណោះ!"),i("File type error");return}if(!(t.size/1024/1024<a)){r.error(`អ្នកអាចផ្ទុកឡើងបានតែរូបភាពទំហំតូចជាង ${a}MB ប៉ុណ្ណោះ!`),i("File size error");return}x(!0);try{const n=await N(t),R={fileName:t.name,base64:n,mimeType:t.type,size:t.size,url:n};d(R),c({success:!0}),r.success("រូបខាងក្រោយត្រូវបានផ្ទុកឡើងដោយជោគជ័យ")}catch(n){console.error("Error uploading back image:",n),r.error("មានបញ្ហាក្នុងការផ្ទុកឡើងរូបខាងក្រោយ"),i("Upload failed")}finally{x(!1)}},b=()=>{g.confirm({title:"តើអ្នកពិតជាចង់លុបរូបខាងក្រោយនេះមែនទេ?",content:"សកម្មភាពនេះមិនអាចត្រឡប់វិញបានទេ។",okText:"យល់ព្រម",cancelText:"បោះបង់",onOk:()=>{d(null),r.success("រូបខាងក្រោយត្រូវបានលុបដោយជោគជ័យ")}})},B=e.jsxs("div",{children:[e.jsx($,{}),e.jsx("div",{style:{marginTop:8},children:"ផ្ទុកឡើងរូបខាងក្រោយ"})]});return e.jsxs("div",{className:"back-image-upload",children:[e.jsx(G,{level:5,className:"khmer-heading mb-4",children:"រូបខាងក្រោយ"}),e.jsxs(H,{className:"khmer-text mb-4 block",children:["សូមផ្ទុកឡើងរូបខាងក្រោយ (អតិបរមា 1 រូបភាព, ទំហំអតិបរមា ",a,"MB)"]}),s&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(C,{size:"small",className:"border-2 border-green-500",style:{width:"300px"},cover:e.jsx("div",{style:{padding:"12px",textAlign:"center",height:"180px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:s.mimeType&&s.mimeType.includes("image")?e.jsx("img",{src:s.url,alt:"រូបខាងក្រោយ",style:{maxHeight:"160px",maxWidth:"100%",objectFit:"contain"}}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(k,{style:{fontSize:"48px",color:"#1890ff"}}),e.jsx("div",{style:{marginTop:"8px",wordBreak:"break-word"},children:e.jsx(f,{title:s.fileName,children:s.fileName})})]})}),children:[e.jsxs("div",{style:{minHeight:"40px"},children:[e.jsx(f,{title:s.fileName,children:e.jsx("div",{style:{wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis"},children:s.fileName})}),e.jsx(S,{color:"green",style:{marginTop:"4px"},children:"រូបខាងក្រោយ"})]}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between"},children:[e.jsx(y,{type:"text",icon:e.jsx(M,{}),onClick:z,size:"small"}),e.jsx(y,{type:"text",icon:e.jsx(L,{}),danger:!0,size:"small",onClick:b})]})]})}),!s&&e.jsx(F,{listType:"picture-card",fileList:[],customRequest:P,multiple:!1,maxCount:1,disabled:p,accept:".jpg,.jpeg,.png",showUploadList:!1,children:B}),e.jsx(g,{open:v,title:u,footer:null,onCancel:()=>m(!1),children:h&&e.jsx("img",{alt:u,style:{width:"100%"},src:h})}),p&&e.jsx("div",{className:"upload-loading",children:e.jsx(O,{tip:"កំពុងផ្ទុកឡើង...",size:"large",children:e.jsx("div",{className:"content"})})})]})}export{te as B,se as F};
