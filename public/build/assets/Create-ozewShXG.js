import{J as C,r as l,j as t,Q as I,B as x,s,h as B}from"./app-BB1ZxGmZ.js";import{R,A as k}from"./AdminLayout-BuxP0tGi.js";import{S as F}from"./SellerForm-BRqNq3od.js";import{F as w,B as A}from"./BackImageUpload-9KlZxYkV.js";import{B as v}from"./Breadcrumb-W210Ky9C.js";import{C as E}from"./index-CFcJuZ_P.js";import{S as N}from"./index-CQIrajnk.js";import{R as D,C as h}from"./row-C2x7paHm.js";import{R as L}from"./ArrowLeftOutlined-DPrGKClu.js";import{R as M}from"./ArrowRightOutlined-6LNn2DEV.js";import"./UserOutlined-DbziX9m8.js";import"./index-BAJJZILe.js";import"./index-Dh1oKUG_.js";import"./EllipsisOutlined-BovgqE1k.js";import"./PurePanel-C84SwQv1.js";import"./index-19zJLVvd.js";import"./InboxOutlined-DQe2Aezk.js";import"./dayjs.min-BKpMflCA.js";import"./khmerDate-iNtMyZoL.js";import"./index-BRhvAF0g.js";import"./index-quoohvpH.js";import"./getAllowClear-DfqxFJiv.js";import"./Input-AvN4Se7e.js";import"./useVariants-CY_Kcp5K.js";import"./EyeOutlined-Mb1FRF2d.js";import"./SearchOutlined-CokIhbHK.js";import"./EditOutlined-DBTY11ET.js";import"./index-D_u505qY.js";import"./useIcons-C3raLKSM.js";import"./CheckOutlined-bJGhASa0.js";import"./DownOutlined-Bh2zEb-F.js";import"./index-Dgyafjhd.js";import"./CalendarOutlined-DBEW_rIX.js";import"./ClockCircleOutlined-C-s8qqeK.js";import"./SaveOutlined-BTWtA3Rs.js";import"./index-xjqdTS8d.js";import"./addEventListener-sAx3j2N4.js";import"./index-4sotxCPT.js";import"./index-CwdmVelz.js";import"./DeleteOutlined-BYdkwIHm.js";import"./FileImageOutlined-DeKkUOaD.js";import"./index-D2Ym1l0Q.js";import"./DownloadOutlined-q1lRnuRm.js";import"./progress-D37wmuzZ.js";import"./index-Yxxb-zBk.js";import"./index-BaRQKH08.js";import"./UploadOutlined-Cn7Qfj15.js";function Q(){const{props:d}=C(),[e,u]=l.useState(0),[i,j]=l.useState(null),[a,g]=l.useState(null),[U,f]=l.useState(!1),n=[{title:"រូបខាងមុខ",content:"front-image"},{title:"រូបខាងក្រោយ",content:"back-image"},{title:"បញ្ចូលព័ត៌មាន",content:"seller-info"}],y=()=>{if(e===0){if(!i){s.error("សូមផ្ទុកឡើងរូបខាងមុខ");return}}else if(e===1&&!a){s.error("សូមផ្ទុកឡើងរូបខាងក្រោយ");return}u(e+1)},b=()=>{u(e-1)},S=async m=>{f(!0);try{const o=[];i&&o.push({...i,isDisplay:!0,type:"front"}),a&&o.push({...a,isDisplay:!1,type:"back"});const r={...m,files:o},c=await window.axios.post("/api/sellers",r,{headers:{"Content-Type":"application/json",Accept:"application/json"}});(c.status===200||c.status===201)&&(f(!1),B.visit(route("data-entry.sellers.index"),{onSuccess:()=>{s.success("អ្នកលក់ត្រូវបានបង្កើតដោយជោគជ័យ")}}))}catch(o){if(f(!1),console.error("Error creating seller:",o),o.response&&o.response.data){const r=o.response.data;r.errors?Object.keys(r.errors).forEach(p=>{const c=Array.isArray(r.errors[p])?r.errors[p][0]:r.errors[p];s.error(c)}):r.message?s.error(r.message):s.error("មានបញ្ហាក្នុងការបង្កើតអ្នកលក់")}else s.error("មានបញ្ហាក្នុងការបង្កើតអ្នកលក់")}};return t.jsxs(t.Fragment,{children:[t.jsx(I,{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}),t.jsx(v,{className:"mb-6",items:[{href:route("dashboard"),title:t.jsx(R,{})},{href:route("data-entry.index"),title:"ទិន្នន័យបញ្ចូល"},{href:route("data-entry.sellers.index"),title:"បញ្ជីអ្នកលក់"},{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}]}),t.jsxs(E,{children:[t.jsx(N,{current:e,items:n.map(m=>({title:m.title,icon:m.icon})),className:"mb-8"}),t.jsxs("div",{className:"steps-content mb-8",children:[n[e].content==="front-image"&&t.jsx(w,{category:"seller",frontImage:i,onFrontImageChange:j}),n[e].content==="back-image"&&t.jsx(A,{category:"seller",backImage:a,onBackImageChange:g}),n[e].content==="seller-info"&&t.jsx(F,{onSubmit:S,files:[i,a].filter(Boolean),frontImage:i})]}),t.jsx("div",{className:"steps-action",children:t.jsxs(D,{justify:"space-between",children:[t.jsx(h,{children:e>0&&t.jsx(x,{icon:t.jsx(L,{}),onClick:b,children:"ត្រឡប់ក្រោយ"})}),t.jsx(h,{children:e<n.length-1&&t.jsx(x,{type:"primary",onClick:y,icon:t.jsx(M,{}),iconPosition:"end",children:e===0?"បន្តទៅរូបខាងក្រោយ":"បន្ទាប់"})})]})})]})]})}Q.layout=d=>t.jsx(k,{children:d,title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"});export{Q as default};
