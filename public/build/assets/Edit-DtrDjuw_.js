import{r as m,j as e,Q as Y,t as y,B as c,h as g,a as k,s as R}from"./app-C81v863Z.js";import{A as $}from"./AdminLayout-4hWCCW4J.js";import{F as w}from"./FileUpload-4FXsKutC.js";import{d as S}from"./dayjs.min-C1_8woz9.js";import{F as a}from"./index-C0G5YYq6.js";import{C as h}from"./index-Cq5Cojs-.js";import{R as M}from"./FileAddOutlined-CSXjCkEU.js";import{R as p,C as o}from"./row-DVautw-w.js";import{I as x}from"./index-CfwryaAm.js";import{R as u}from"./index-BXobfGdR.js";import{D as T}from"./index-5Q1J_MEE.js";import{R as V}from"./UserOutlined-Cs_VmhTJ.js";import{B}from"./Breadcrumb-4NJyj_rA.js";import{T as L}from"./index-DVx3a9qR.js";import{S as I}from"./index-CxzV53XG.js";import{R as A}from"./ArrowLeftOutlined-DwSHvv8c.js";import{S as P}from"./index-0iedL70p.js";import{R as q}from"./ArrowRightOutlined-bZyd9W-N.js";import{R as Q}from"./SaveOutlined-DxZ8K-Ob.js";import"./index-hGIK_HDO.js";import"./index-BDtS0eMa.js";import"./EllipsisOutlined-Dgx-5LTE.js";import"./PurePanel-B9LZ7YRU.js";import"./InboxOutlined-NtB6O71W.js";import"./index-oMLWggrR.js";import"./EyeOutlined-B_Q_oTAq.js";import"./CheckCircleOutlined-B1TgeDI1.js";import"./index-DhGGMygA.js";import"./DeleteOutlined-CEoMe9ec.js";import"./FilePdfOutlined-DEIi5Lbm.js";import"./FileImageOutlined-eYZWO5_j.js";import"./index-Pphe6XF4.js";import"./DownloadOutlined-DWQYyjAb.js";import"./progress-Dl3Fwial.js";import"./CheckOutlined-BtpNa_G2.js";import"./index-alDFd_10.js";import"./UploadOutlined-CroxUJR-.js";import"./useVariants-DiVBn6uh.js";import"./getAllowClear-YBVvCZBt.js";import"./Input-BSKYPgzP.js";import"./SearchOutlined-rZRKH8d_.js";import"./EditOutlined-Dt25MYJV.js";import"./useBubbleLock-g9XhDwJl.js";import"./CalendarOutlined-BKTt4Cib.js";import"./ClockCircleOutlined-Zf5tEG56.js";import"./useIcons-Bcyu7X2C.js";import"./DownOutlined-Bis42zyM.js";const{Title:G,Text:Ae}=L,{Step:U}=I;function z({seller:t,documents:l}){const[v]=a.useForm(),[i,j]=m.useState(0),[f,b]=m.useState([]),[C,_]=m.useState(!1),[n,D]=m.useState({name:t.name,sex:t.sex,date_of_birth:t.date_of_birth,identity_number:t.identity_number,address:t.address,phone_number:t.phone_number});m.useEffect(()=>{if(l&&l.length>0){const r=l.map(s=>({uid:s.id,name:s.file_name,status:"done",url:`/storage/${s.file_path}`,isExisting:!0,id:s.id,isDisplay:s.is_display}));b(r)}},[l]);const d=[{title:"កិច្ចសន្យា",icon:e.jsx(M,{}),content:e.jsx(h,{title:"បញ្ចូលកិច្ចសន្យា",className:"mb-6",children:e.jsx(w,{fileList:f,setFileList:b,maxFiles:2})})},{title:"ព័ត៌មានអ្នកលក់",icon:e.jsx(V,{}),content:e.jsx(h,{title:"បញ្ចូលព័ត៌មានអ្នកលក់",className:"mb-6",children:e.jsxs(a,{form:v,layout:"vertical",initialValues:{name:t.name,sex:t.sex,date_of_birth:t.date_of_birth?S(t.date_of_birth):null,identity_number:t.identity_number,address:t.address,phone_number:t.phone_number},onValuesChange:(r,s)=>{D({...n,...r})},children:[e.jsxs(p,{gutter:16,children:[e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"ឈ្មោះ",name:"name",rules:[{required:!0,message:"សូមបញ្ចូលឈ្មោះ"}],children:e.jsx(x,{placeholder:"បញ្ចូលឈ្មោះ"})})}),e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"ភេទ",name:"sex",rules:[{required:!0,message:"សូមជ្រើសរើសភេទ"}],children:e.jsxs(u.Group,{children:[e.jsx(u,{value:"male",children:"ប្រុស"}),e.jsx(u,{value:"female",children:"ស្រី"})]})})})]}),e.jsxs(p,{gutter:16,children:[e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"ថ្ងៃខែឆ្នាំកំណើត",name:"date_of_birth",children:e.jsx(T,{style:{width:"100%"},format:"YYYY-MM-DD"})})}),e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"លេខអត្តសញ្ញាណប័ណ្ណ",name:"identity_number",children:e.jsx(x,{placeholder:"បញ្ចូលលេខអត្តសញ្ញាណប័ណ្ណ"})})})]}),e.jsxs(p,{gutter:16,children:[e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"អាសយដ្ឋាន",name:"address",children:e.jsx(x.TextArea,{rows:4,placeholder:"បញ្ចូលអាសយដ្ឋាន"})})}),e.jsx(o,{xs:24,md:12,children:e.jsx(a.Item,{label:"លេខទូរស័ព្ទ",name:"phone_number",children:e.jsx(x,{placeholder:"បញ្ចូលលេខទូរស័ព្ទ"})})})]})]})})}],F=async()=>{i===0&&j(i+1)},N=()=>{j(i-1)},E=async()=>{try{_(!0);const r={...n,date_of_birth:n.date_of_birth instanceof S?n.date_of_birth.format("YYYY-MM-DD"):n.date_of_birth,documents:f.map(s=>({id:s.id,isExisting:s.isExisting||!1,tempPath:s.tempPath,fileName:s.name,isDisplay:s.isDisplay||!1}))};await k.put(`/api/sellers/${t.id}`,r),R.success("អ្នកលក់ត្រូវបានកែប្រែដោយជោគជ័យ"),g.visit(route("data-entry.sellers.index"))}catch(r){console.error("Error updating seller:",r),R.error("មានបញ្ហាក្នុងការកែប្រែអ្នកលក់")}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"កែប្រែអ្នកលក់"}),e.jsxs("div",{className:"seller-edit",children:[e.jsx(B,{items:[{title:e.jsx(y,{href:route("data-entry.index"),children:"ជ្រើសរើសប្រភេទទិន្នន័យ"})},{title:e.jsx(y,{href:route("data-entry.sellers.index"),children:"បញ្ជីអ្នកលក់"})},{title:"កែប្រែអ្នកលក់"}],className:"mb-6"}),e.jsxs(h,{children:[e.jsx(G,{level:4,className:"khmer-heading mb-6",children:"កែប្រែអ្នកលក់"}),e.jsx(I,{current:i,className:"mb-8",children:d.map(r=>e.jsx(U,{title:r.title,icon:r.icon},r.title))}),e.jsx("div",{className:"steps-content mb-6",children:d[i].content}),e.jsx("div",{className:"steps-action",children:e.jsxs(p,{justify:"space-between",children:[e.jsx(o,{children:i>0&&e.jsx(c,{icon:e.jsx(A,{}),onClick:N,children:"ត្រឡប់ក្រោយ"})}),e.jsx(o,{children:e.jsxs(P,{children:[e.jsx(c,{onClick:()=>g.visit(route("data-entry.sellers.index")),children:"បោះបង់"}),i<d.length-1&&e.jsx(c,{type:"primary",onClick:F,icon:e.jsx(q,{}),children:"បន្ទាប់"}),i===d.length-1&&e.jsx(c,{type:"primary",onClick:E,loading:C,icon:e.jsx(Q,{}),children:"រក្សាទុក"})]})})]})})]})]})]})}z.layout=t=>e.jsx($,{title:"កែប្រែអ្នកលក់",children:t});export{z as default};
