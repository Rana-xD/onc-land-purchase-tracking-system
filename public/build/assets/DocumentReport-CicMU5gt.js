import{r as o,a as w,s as S,j as e,Q as b,B as T,h as I}from"./app-BRuw9EN3.js";import{A as k,a as v}from"./AdminLayout-BQR47gOS.js";import{B as n}from"./Breadcrumb-B8YoZBHX.js";import{C as L}from"./index-D2zmwFIy.js";import{I as N}from"./index-BpUxqbWL.js";import{R as $}from"./SearchOutlined-DTcydAAK.js";import{F as R}from"./Table-BauybMYs.js";import{T as z}from"./index-DK7c9CS7.js";import{T as s}from"./index-emLlVOqM.js";import"./UserOutlined-qdJtpBqh.js";import"./index-DjUyA9od.js";import"./index-E_hMYPT7.js";import"./EllipsisOutlined-CdogJ6km.js";import"./PurePanel-eBpBMAv8.js";import"./index-Bf8sDkQb.js";import"./InboxOutlined-CgVO651u.js";import"./DownOutlined--KJm7Kio.js";import"./useVariants-CDpFdPYi.js";import"./getAllowClear-3Rav48C8.js";import"./Input-BgU6f7sv.js";import"./EyeOutlined-TX0XAQgo.js";import"./EditOutlined-LzavAjS2.js";import"./addEventListener-Dx0K44fe.js";import"./index-gMKDkKA7.js";import"./useIcons-DCGaULcT.js";import"./CheckOutlined-Du9YJw9D.js";import"./index-jrUk30CK.js";import"./Pagination-CmNBiSP-.js";import"./index-BXqabLx5.js";import"./FileOutlined-B_lud-B5.js";import"./FolderOutlined-DG4gUvD6.js";const{Title:B,Text:E}=z;function ue({auth:m}){const[i,p]=o.useState([]),[u,l]=o.useState(!1),[a,x]=o.useState(""),[c,h]=o.useState({current:1,pageSize:15,total:0});o.useEffect(()=>{d(1)},[]);const d=async(t=1)=>{l(!0);try{const r=await w.get("/api/reports/document",{params:{page:t,per_page:15}});p(r.data.data),h({current:r.data.current_page,pageSize:r.data.per_page,total:r.data.total})}catch(r){console.error("Error fetching contracts:",r),S.error("មានបញ្ហាក្នុងការទាញយកកិច្ចសន្យា")}finally{l(!1)}},f=()=>i.filter(r=>r.contract_id.toLowerCase().includes(a.toLowerCase())||r.seller_name.toLowerCase().includes(a.toLowerCase())||r.land_plot_number.toLowerCase().includes(a.toLowerCase())),g=t=>{I.visit(`/documents/${t}`)},j=t=>{d(t.current)},y=t=>{switch(t){case"active":return e.jsx(s,{color:"green",children:"សកម្ម"});case"completed":return e.jsx(s,{color:"blue",children:"បានបញ្ចប់"});case"cancelled":return e.jsx(s,{color:"red",children:"បានលុបចោល"});default:return e.jsx(s,{color:"default",children:t})}},C=[{title:"លេខកិច្ចសន្យា",dataIndex:"contract_id",key:"contract_id",render:(t,r)=>e.jsx(T,{type:"link",onClick:()=>g(t),style:{padding:0,fontWeight:"bold",color:"#1890ff"},children:t})},{title:"ឈ្មោះអ្នកលក់",dataIndex:"seller_name",key:"seller_name"},{title:"លេខក្បែងដី",dataIndex:"land_plot_number",key:"land_plot_number"},{title:"ចំនួនទឹកប្រាក់សរុប",dataIndex:"total_amount",key:"total_amount",render:t=>`$${parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2})}`},{title:"កាលបរិច្ឆេទកិច្ចសន្យា",dataIndex:"contract_date",key:"contract_date"},{title:"ស្ថានភាព",dataIndex:"status",key:"status",render:t=>y(t)}],_=a?f():i;return e.jsxs(k,{user:m.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"របាយការណ៍កិច្ចសន្យា"}),children:[e.jsx(b,{title:"របាយការណ៍កិច្ចសន្យា"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(n,{className:"mb-6",children:[e.jsx(n.Item,{children:"របាយការណ៍"}),e.jsx(n.Item,{children:"បញ្ជីកិច្ចសន្យា"})]}),e.jsxs(L,{title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{level:4,className:"m-0",children:[e.jsx(v,{className:"mr-2"}),"បញ្ជីកិច្ចសន្យាលក់ដី"]}),e.jsxs(E,{type:"secondary",children:["សរុប: ",c.total," កិច្ចសន្យា"]})]}),className:"mb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(N,{placeholder:"ស្វែងរកតាមលេខកិច្ចសន្យា, ឈ្មោះអ្នកលក់, ឬលេខក្បែងដី...",value:a,onChange:t=>x(t.target.value),style:{width:"400px"},prefix:e.jsx($,{}),allowClear:!0})}),e.jsx(R,{columns:C,dataSource:_,rowKey:"id",loading:u,pagination:{...c,showSizeChanger:!1,showQuickJumper:!0,showTotal:(t,r)=>`បង្ហាញ ${r[0]}-${r[1]} នៃ ${t} កិច្ចសន្យា`},onChange:j,size:"middle",scroll:{x:800}})]})]})})]})}export{ue as default};
