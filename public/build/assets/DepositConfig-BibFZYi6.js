import{r as n,j as s,Q as N,B as m,s as a,e as p}from"./app-BBTICp4j.js";import{A as b,b as R}from"./AdminLayout-DxDDGS0e.js";import{C as d}from"./index-B2wIyAm9.js";import{S as $}from"./index-DtBkO-di.js";import{T as S}from"./index-Cfh7qGRB.js";import{D as x}from"./index-dnjbR_wK.js";import{T as w}from"./index-QB1dCeWk.js";import{S as h}from"./index-mLV1oJws.js";import{R as _}from"./UserOutlined-B9ZAOThG.js";import{R as D}from"./EnvironmentOutlined-ChXS8V2q.js";import{R as C}from"./DollarOutlined-DHlflz1y.js";import{R as I}from"./FileOutlined-Bkjwbk_U.js";import"./index-D88NIlOR.js";import"./index-C5oWf6N6.js";import"./EllipsisOutlined-Bhf9hnSZ.js";import"./PurePanel-DnHFRN3c.js";import"./index-BLi1CBmm.js";import"./useVariants-Bsn3ZCEZ.js";import"./CheckOutlined-DMU6mItx.js";import"./progress-0HAaq4eU.js";import"./EditOutlined-DhdXE3k2.js";import"./getAllowClear-DLCbMek5.js";import"./DownOutlined-CIxjOa2g.js";import"./useIcons-DLppMF82.js";import"./SearchOutlined-DJlkhe1H.js";const{Title:T,Text:l}=S,{Option:r}=h;function rs({document:e}){const[j,c]=n.useState(!1),[o,f]=n.useState(e.deposit_amount||0),[i,u]=n.useState(e.deposit_months||3),v=async()=>{if(!o){a.error("សូមបញ្ចូលចំនួនប្រាក់កក់");return}if(!i){a.error("សូមជ្រើសរើសរយៈពេលកក់ប្រាក់");return}c(!0);try{const t="deposit-contracts";await p.post(`/api/${t}/${e.id}/deposit-config`,{deposit_amount:o,deposit_months:i}),await p.post(`/api/${t}/${e.id}/generate`),window.location.href=route("deposit-contracts.success",{id:e.id})}catch(t){console.error("Error generating document:",t),t.response&&t.response.data&&t.response.data.error?a.error(t.response.data.error):a.error("មានបញ្ហាក្នុងការបង្កើតឯកសារ")}finally{c(!1)}},g=3,y=[{title:"ជ្រើសរើសអ្នកទិញ",icon:s.jsx(_,{})},{title:"ជ្រើសរើសអ្នកលក់",icon:s.jsx(R,{})},{title:"ជ្រើសរើសដី និងកំណត់តម្លៃ",icon:s.jsx(D,{})},{title:"កំណត់ការកក់ប្រាក់",icon:s.jsx(C,{})},{title:"បង្កើតឯកសារ",icon:s.jsx(I,{})}];return s.jsxs(b,{children:[s.jsx(N,{title:"កំណត់ការកក់ប្រាក់"}),s.jsxs("div",{className:"container mx-auto py-6",children:[s.jsx(d,{className:"mb-6",children:s.jsx($,{current:g,items:y,responsive:!0,className:"site-navigation-steps",size:"small"})}),s.jsxs(d,{children:[s.jsx(T,{level:3,className:"mb-6",children:"កំណត់ការកក់ប្រាក់"}),s.jsx("div",{className:"mb-6",children:s.jsxs(l,{strong:!0,children:["តម្លៃដីសរុប: $",parseFloat(e.total_land_price).toLocaleString()]})}),s.jsx(x,{}),s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(l,{strong:!0,children:["ចំនួនប្រាក់កក់ (Deposit Amount) ",s.jsx("span",{style:{color:"red"},children:"*"})]})}),s.jsx(w,{style:{width:"100%"},min:0,max:e.total_land_price,precision:2,prefix:"$",value:o,onChange:f,placeholder:"បញ្ចូលចំនួនប្រាក់កក់"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(l,{strong:!0,children:["រយៈពេលកក់ប្រាក់ (Deposit Period) ",s.jsx("span",{style:{color:"red"},children:"*"})]})}),s.jsxs(h,{style:{width:"100%"},value:i,onChange:u,placeholder:"ជ្រើសរើសរយៈពេល",children:[s.jsx(r,{value:1,children:"1 ខែ (1 month)"}),s.jsx(r,{value:2,children:"2 ខែ (2 months)"}),s.jsx(r,{value:3,children:"3 ខែ (3 months)"}),s.jsx(r,{value:4,children:"4 ខែ (4 months)"}),s.jsx(r,{value:5,children:"5 ខែ (5 months)"}),s.jsx(r,{value:6,children:"6 ខែ (6 months)"})]})]})]}),s.jsx(x,{}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(m,{href:route("deposit-contracts.select-lands",{id:e.id}),children:"ត្រឡប់"}),s.jsx(m,{type:"primary",onClick:v,loading:j,disabled:!o||!i,children:"បង្កើតឯកសារ"})]})]})]})]})}export{rs as default};
