import{J as C,r as p,j as t,Q as I,B as u,s as o,h as B}from"./app-mk9C7I_N.js";import{R,A as k}from"./AdminLayout-CSpn-5iP.js";import{S as F}from"./SellerForm-i6Bz75oX.js";import{F as w,B as A}from"./BackImageUpload-CWZmETnT.js";import{B as v}from"./Breadcrumb-Ceo11VVb.js";import{C as E}from"./index-DZTYDYFc.js";import{S as N}from"./index-Bt0eMnk-.js";import{R as L,C as x}from"./row-CPFUowx7.js";import{R as M}from"./ArrowLeftOutlined-cOBH5Dj-.js";import{R as Q}from"./ArrowRightOutlined-BoNy8_6V.js";import"./UserOutlined-Do6ZzMFA.js";import"./index-D66KGu5D.js";import"./index-phC_QXgK.js";import"./EllipsisOutlined-DwAdn_jY.js";import"./PurePanel-Bwrv9FGC.js";import"./index-pKRxIKW4.js";import"./InboxOutlined-CDGQXwno.js";import"./dayjs.min-DI9V4UpH.js";import"./khmerDate-iNtMyZoL.js";import"./index-ByQ52J4c.js";import"./index-BiMKBPmP.js";import"./getAllowClear-BGHWSs2V.js";import"./Input-DUxd1TpC.js";import"./useVariants-BUy45nvZ.js";import"./EyeOutlined-CQ17cMyg.js";import"./SearchOutlined-jGh7iI3q.js";import"./EditOutlined-CkdCVUZ6.js";import"./index-CHP0fo2g.js";import"./useIcons-CunuZG3Y.js";import"./CheckOutlined-CeCjh9xi.js";import"./DownOutlined-CUiMnNSy.js";import"./index-BrAkZjxA.js";import"./CalendarOutlined-DHG6L8yA.js";import"./ClockCircleOutlined-DNAvTwIZ.js";import"./SaveOutlined-odoOer7R.js";import"./index-DQt1VCxb.js";import"./addEventListener-KCP_u9m-.js";import"./index-DDFZ7dy0.js";import"./index-DUw4RcKT.js";import"./DeleteOutlined-CQidAT13.js";import"./FileImageOutlined-CqN5lIwV.js";import"./index-C1ppeYdl.js";import"./DownloadOutlined-mYWFKdPn.js";import"./progress-DvkafPop.js";import"./index-Bckrl1S6.js";import"./index-CYzbL2Oe.js";import"./UploadOutlined-DUu2E3k2.js";function U(){const{props:f}=C(),[r,d]=p.useState(0),[a,j]=p.useState(null),[m,g]=p.useState(null),[$,l]=p.useState(!1),n=[{title:"រូបខាងមុខ",content:"front-image"},{title:"រូបខាងក្រោយ",content:"back-image"},{title:"បញ្ចូលព័ត៌មាន",content:"seller-info"}],h=()=>{if(r===0){if(!a){o.error("សូមផ្ទុកឡើងរូបខាងមុខ");return}}else if(r===1&&!m){o.error("សូមផ្ទុកឡើងរូបខាងក្រោយ");return}d(r+1)},y=()=>{d(r-1)},b=async c=>{l(!0);try{const s={...c,frontImage:a,backImage:m},i=await window.axios.post("/api/sellers",s,{headers:{"Content-Type":"application/json",Accept:"application/json"}});(i.status===200||i.status===201)&&(l(!1),B.visit(route("data-entry.sellers.index"),{onSuccess:()=>{o.success("អ្នកលក់ត្រូវបានបង្កើតដោយជោគជ័យ")}}))}catch(s){if(l(!1),console.error("Error creating seller:",s),s.response&&s.response.data){const e=s.response.data;e.errors?Object.keys(e.errors).forEach(i=>{const S=Array.isArray(e.errors[i])?e.errors[i][0]:e.errors[i];o.error(S)}):e.message?o.error(e.message):o.error("មានបញ្ហាក្នុងការបង្កើតអ្នកលក់")}else o.error("មានបញ្ហាក្នុងការបង្កើតអ្នកលក់")}};return t.jsxs(t.Fragment,{children:[t.jsx(I,{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}),t.jsx(v,{className:"mb-6",items:[{href:route("dashboard"),title:t.jsx(R,{})},{href:route("data-entry.index"),title:"ទិន្នន័យបញ្ចូល"},{href:route("data-entry.sellers.index"),title:"បញ្ជីអ្នកលក់"},{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}]}),t.jsxs(E,{children:[t.jsx(N,{current:r,items:n.map(c=>({title:c.title,icon:c.icon})),className:"mb-8"}),t.jsxs("div",{className:"steps-content mb-8",children:[n[r].content==="front-image"&&t.jsx(w,{category:"seller",frontImage:a,onFrontImageChange:j}),n[r].content==="back-image"&&t.jsx(A,{category:"seller",backImage:m,onBackImageChange:g}),n[r].content==="seller-info"&&t.jsx(F,{onSubmit:b,files:[a,m].filter(Boolean),frontImage:a})]}),t.jsx("div",{className:"steps-action",children:t.jsxs(L,{justify:"space-between",children:[t.jsx(x,{children:r>0&&t.jsx(u,{icon:t.jsx(M,{}),onClick:y,children:"ត្រឡប់ក្រោយ"})}),t.jsx(x,{children:r<n.length-1&&t.jsx(u,{type:"primary",onClick:h,icon:t.jsx(Q,{}),iconPosition:"end",children:r===0?"បន្តទៅរូបខាងក្រោយ":"បន្ទាប់"})})]})})]})]})}U.layout=f=>t.jsx(k,{children:f,title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"});export{U as default};
