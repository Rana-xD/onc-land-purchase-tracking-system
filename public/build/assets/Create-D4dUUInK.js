import{j as e,r as d,Q as v,B as Q,a as F,s as h,h as J}from"./app-C81v863Z.js";import{R as k,A as U}from"./AdminLayout-4hWCCW4J.js";import{F as Y}from"./FileUpload-4FXsKutC.js";import{d as K}from"./dayjs.min-C1_8woz9.js";import{C as u}from"./index-Cq5Cojs-.js";import{F as A}from"./index-C0G5YYq6.js";import{I as g}from"./index-CfwryaAm.js";import{S as B}from"./index-CXKhVvIi.js";import{D as w}from"./index-5Q1J_MEE.js";import{I as z}from"./index-B2LGBo3K.js";import{R as M}from"./FilePdfOutlined-DEIi5Lbm.js";import{R as D}from"./FileImageOutlined-eYZWO5_j.js";import{T as H}from"./index-DVx3a9qR.js";import{B as L}from"./Breadcrumb-4NJyj_rA.js";import{S as P}from"./index-CxzV53XG.js";import{R as T,C as x}from"./row-DVautw-w.js";import{S as q}from"./index-0iedL70p.js";import{R as G}from"./UploadOutlined-CroxUJR-.js";import{R as Z}from"./FormOutlined-BWVmM4n-.js";import"./UserOutlined-Cs_VmhTJ.js";import"./index-hGIK_HDO.js";import"./index-BDtS0eMa.js";import"./EllipsisOutlined-Dgx-5LTE.js";import"./PurePanel-B9LZ7YRU.js";import"./InboxOutlined-NtB6O71W.js";import"./index-oMLWggrR.js";import"./EyeOutlined-B_Q_oTAq.js";import"./CheckCircleOutlined-B1TgeDI1.js";import"./index-DhGGMygA.js";import"./DeleteOutlined-CEoMe9ec.js";import"./index-Pphe6XF4.js";import"./DownloadOutlined-DWQYyjAb.js";import"./progress-Dl3Fwial.js";import"./CheckOutlined-BtpNa_G2.js";import"./index-alDFd_10.js";import"./useVariants-DiVBn6uh.js";import"./getAllowClear-YBVvCZBt.js";import"./Input-BSKYPgzP.js";import"./SearchOutlined-rZRKH8d_.js";import"./EditOutlined-Dt25MYJV.js";import"./useIcons-Bcyu7X2C.js";import"./DownOutlined-Bis42zyM.js";import"./CalendarOutlined-BKTt4Cib.js";import"./ClockCircleOutlined-Zf5tEG56.js";import"./addEventListener-CGfbZz05.js";const{Option:C}=B,{Title:He,Text:Le}=H;function X({formData:s,setFormData:m,displayImage:r}){const i=(t,o)=>{m({...s,[t]:o})},l=t=>t?t.base64?t.base64:t.url?t.url:t.response&&t.response.file&&t.response.file.url?t.response.file.url:t.originFileObj?URL.createObjectURL(t.originFileObj):t.tempPath?`/storage/${t.tempPath}`:t.response&&t.response.file&&t.response.file.tempPath?`/storage/${t.response.file.tempPath}`:null:null,p=t=>{if(!t)return!1;if(t.base64&&(t.base64.startsWith("data:image/jpeg")||t.base64.startsWith("data:image/png")||t.base64.startsWith("data:image/jpg")))return!0;const o=["image/jpeg","image/png","image/jpg"];return t.type&&o.includes(t.type)},E=()=>{if(!r)return null;console.log("SellerForm - displayImage:",r),console.log("SellerForm - displayImage type:",typeof r),console.log("SellerForm - displayImage has base64:",!!r.base64);const t=l(r);return console.log("SellerForm - previewUrl:",t),e.jsx(u,{title:"រូបភាពបង្ហាញ",className:"mb-6",styles:{body:{padding:"16px",textAlign:"center"}},children:p(r)&&t?e.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:e.jsx(z,{src:t,alt:r.name||r.fileName,style:{maxHeight:"350px",objectFit:"contain"},preview:{maskClassName:"preview-mask",mask:e.jsx("div",{children:"Click to view full size"})},fallback:"data:image/png;base64,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"})}):e.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[r.type&&r.type.includes("pdf")?e.jsx(M,{style:{fontSize:"48px",color:"#ff4d4f"}}):e.jsx(D,{style:{fontSize:"48px",color:"#1890ff"}}),e.jsx("div",{style:{marginTop:"8px"},children:r.name||r.fileName})]})})};return e.jsxs(e.Fragment,{children:[r&&E(),e.jsx(u,{title:"ព័ត៌មានអ្នកលក់",className:"mb-6",children:e.jsxs(A,{layout:"vertical",children:[e.jsx(A.Item,{label:"ឈ្មោះ",required:!0,rules:[{required:!0,message:"សូមបញ្ចូលឈ្មោះ"}],children:e.jsx(g,{placeholder:"បញ្ចូលឈ្មោះ",value:s.name,onChange:t=>i("name",t.target.value)})}),e.jsx(A.Item,{label:"ភេទ",required:!0,children:e.jsxs(B,{value:s.sex,onChange:t=>i("sex",t),children:[e.jsx(C,{value:"male",children:"ប្រុស"}),e.jsx(C,{value:"female",children:"ស្រី"})]})}),e.jsx(A.Item,{label:"ថ្ងៃខែឆ្នាំកំណើត",required:!0,children:e.jsx(w,{style:{width:"100%"},format:"DD/MM/YYYY",value:s.date_of_birth?K(s.date_of_birth):null,onChange:(t,o)=>i("date_of_birth",t?t.format("YYYY-MM-DD"):null)})}),e.jsx(A.Item,{label:"លេខអត្តសញ្ញាណប័ណ្ណ",required:!0,children:e.jsx(g,{placeholder:"បញ្ចូលលេខអត្តសញ្ញាណប័ណ្ណ",value:s.identity_number,onChange:t=>i("identity_number",t.target.value)})}),e.jsx(A.Item,{label:"អាសយដ្ឋាន",required:!0,children:e.jsx(g.TextArea,{placeholder:"បញ្ចូលអាសយដ្ឋាន",rows:3,value:s.address,onChange:t=>i("address",t.target.value)})}),e.jsx(A.Item,{label:"លេខទូរស័ព្ទ",children:e.jsx(g,{placeholder:"បញ្ចូលលេខទូរស័ព្ទ",value:s.phone_number,onChange:t=>i("phone_number",t.target.value)})})]})})]})}function W(){const[s,m]=d.useState(0),[r,i]=d.useState([]),[l,p]=d.useState({name:"",sex:"male",date_of_birth:"",identity_number:"",address:"",phone_number:""}),[E,t]=d.useState(!1),o=r.find(n=>n.isDisplay)||r[0]||null,b=async()=>{t(!0);try{const n=r.map(a=>{const I=o&&(a.uid&&o.uid===a.uid||a.base64&&o.base64===a.base64),S=a.name||a.fileName,f=a.type||"image/jpeg",R=a.base64;return{fileName:S,isDisplay:I||!1,base64:R,mimeType:f}}),j=await F.post("/api/sellers",{...l,documents:n});j.data.message&&j.data.message.includes("successfully")?(h.success("ព័ត៌មានអ្នកលក់ត្រូវបានរក្សាទុកដោយជោគជ័យ!"),J.visit(route("data-entry.sellers.index"))):h.error("មានបញ្ហាក្នុងការរក្សាទុកព័ត៌មានអ្នកលក់។")}catch{h.error("មានបញ្ហាក្នុងការរក្សាទុកព័ត៌មានអ្នកលក់។")}finally{t(!1)}},c=[{title:"បញ្ចូលកិច្ចសន្យា",icon:e.jsx(G,{}),content:e.jsx(Y,{category:"seller",fileList:r,onFilesChange:n=>{i(n)},maxFiles:2})},{title:"បញ្ចូលព័ត៌មាន",icon:e.jsx(Z,{}),content:e.jsx(e.Fragment,{children:e.jsx(X,{formData:l,setFormData:p,displayImage:o})})}],y=()=>{m(s+1)},N=()=>{m(s-1)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}),e.jsx(L,{className:"mb-6",items:[{href:route("dashboard"),title:e.jsx(k,{})},{href:route("data-entry.index"),title:"ទិន្នន័យបញ្ចូល"},{href:route("data-entry.sellers.index"),title:"បញ្ជីអ្នកលក់"},{title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"}]}),e.jsxs(u,{children:[e.jsx(P,{current:s,items:c.map(n=>({title:n.title,icon:n.icon})),className:"mb-8"}),e.jsx("div",{className:"steps-content mb-8",children:c[s].content}),e.jsx("div",{className:"steps-action",children:e.jsxs(T,{justify:"space-between",children:[e.jsx(x,{children:s>0&&e.jsx(Q,{onClick:N,children:"ត្រឡប់ក្រោយ"})}),e.jsx(x,{children:e.jsxs(q,{children:[s<c.length-1&&e.jsx(Q,{type:"primary",onClick:y,children:"បន្ទាប់"}),s===c.length-1&&e.jsx(Q,{type:"primary",onClick:b,loading:E,disabled:!l.name||!l.identity_number||r.length===0,children:"រក្សាទុក"})]})})]})})]})]})}W.layout=s=>e.jsx(U,{children:s,title:"បញ្ចូលព័ត៌មានអ្នកលក់ថ្មី"});export{W as default};
