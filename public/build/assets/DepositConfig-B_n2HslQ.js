import{r as n,j as s,Q as N,d as c}from"./app-D0OhDuOP.js";import{A as b,b as R}from"./AdminLayout-DfyZC7U7.js";import{C as p}from"./index-BXZQm44E.js";import{S as $}from"./index-DeYg2bFH.js";import{T as S}from"./index-DUD5X347.js";import{D as d}from"./index-BoUcoXbW.js";import{T as w}from"./index-Dx6sVVHZ.js";import{S as h}from"./index-BXlDNFm_.js";import{B as x}from"./index-XQ9uBlxv.js";import{s as a}from"./index-VXrvBi_7.js";import{R as _}from"./UserOutlined-Bw1Yg3TV.js";import{R as D}from"./EnvironmentOutlined-C6fAnWDm.js";import{R as C}from"./DollarOutlined-BgkhO_OZ.js";import{R as I}from"./FileOutlined-CmtzEeI9.js";import"./index-BKPGZTnh.js";import"./EllipsisOutlined-BcUT9_x5.js";import"./PurePanel-BrlMViLC.js";import"./index-CpY42lHj.js";import"./Skeleton-BB1PfEPR.js";import"./CloseOutlined-CSg-7HVH.js";import"./useVariants-VmmnPvRy.js";import"./CheckOutlined-C-W3vkf9.js";import"./progress-CZwQN1Wi.js";import"./ExclamationCircleFilled-BuCwC-hN.js";import"./EditOutlined-BQAB7wjt.js";import"./getAllowClear-7r21EHJH.js";import"./DownOutlined-BKT6hG3e.js";import"./pickAttrs-BMtZpb9Y.js";import"./useIcons-De8HtjeC.js";import"./SearchOutlined-DdbS1Qlk.js";import"./InfoCircleFilled-Csbq1HVY.js";const{Title:T,Text:l}=S,{Option:r}=h;function ms({document:e}){const[j,m]=n.useState(!1),[o,f]=n.useState(e.deposit_amount||0),[i,u]=n.useState(e.deposit_months||3),v=async()=>{if(!o){a.error("សូមបញ្ចូលចំនួនប្រាក់កក់");return}if(!i){a.error("សូមជ្រើសរើសរយៈពេលកក់ប្រាក់");return}m(!0);try{const t="deposit-contracts";await c.post(`/api/${t}/${e.id}/deposit-config`,{deposit_amount:o,deposit_months:i}),await c.post(`/api/${t}/${e.id}/generate`),window.location.href=route("deposit-contracts.success",{id:e.id})}catch(t){console.error("Error generating document:",t),t.response&&t.response.data&&t.response.data.error?a.error(t.response.data.error):a.error("មានបញ្ហាក្នុងការបង្កើតឯកសារ")}finally{m(!1)}},g=3,y=[{title:"ជ្រើសរើសអ្នកទិញ",icon:s.jsx(_,{})},{title:"ជ្រើសរើសអ្នកលក់",icon:s.jsx(R,{})},{title:"ជ្រើសរើសដី និងកំណត់តម្លៃ",icon:s.jsx(D,{})},{title:"កំណត់ការកក់ប្រាក់",icon:s.jsx(C,{})},{title:"បង្កើតឯកសារ",icon:s.jsx(I,{})}];return s.jsxs(b,{children:[s.jsx(N,{title:"កំណត់ការកក់ប្រាក់"}),s.jsxs("div",{className:"container mx-auto py-6",children:[s.jsx(p,{className:"mb-6",children:s.jsx($,{current:g,items:y,responsive:!0,className:"site-navigation-steps",size:"small"})}),s.jsxs(p,{children:[s.jsx(T,{level:3,className:"mb-6",children:"កំណត់ការកក់ប្រាក់"}),s.jsx("div",{className:"mb-6",children:s.jsxs(l,{strong:!0,children:["តម្លៃដីសរុប: $",parseFloat(e.total_land_price).toLocaleString()]})}),s.jsx(d,{}),s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(l,{strong:!0,children:["ចំនួនប្រាក់កក់ (Deposit Amount) ",s.jsx("span",{style:{color:"red"},children:"*"})]})}),s.jsx(w,{style:{width:"100%"},min:0,max:e.total_land_price,precision:2,prefix:"$",value:o,onChange:f,placeholder:"បញ្ចូលចំនួនប្រាក់កក់"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(l,{strong:!0,children:["រយៈពេលកក់ប្រាក់ (Deposit Period) ",s.jsx("span",{style:{color:"red"},children:"*"})]})}),s.jsxs(h,{style:{width:"100%"},value:i,onChange:u,placeholder:"ជ្រើសរើសរយៈពេល",children:[s.jsx(r,{value:1,children:"1 ខែ (1 month)"}),s.jsx(r,{value:2,children:"2 ខែ (2 months)"}),s.jsx(r,{value:3,children:"3 ខែ (3 months)"}),s.jsx(r,{value:4,children:"4 ខែ (4 months)"}),s.jsx(r,{value:5,children:"5 ខែ (5 months)"}),s.jsx(r,{value:6,children:"6 ខែ (6 months)"})]})]})]}),s.jsx(d,{}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(x,{href:route("deposit-contracts.select-lands",{id:e.id}),children:"ត្រឡប់"}),s.jsx(x,{type:"primary",onClick:v,loading:j,disabled:!o||!i,children:"បង្កើតឯកសារ"})]})]})]})]})}export{ms as default};
