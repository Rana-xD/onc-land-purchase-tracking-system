import{r as d,j as e,Q as S,t as b,B as p,h as x,a as T,s as h}from"./app-BB1ZxGmZ.js";import{A as N}from"./AdminLayout-BuxP0tGi.js";import{B as k}from"./Breadcrumb-W210Ky9C.js";import{C as l}from"./index-CFcJuZ_P.js";import{R as j,C as a}from"./row-C2x7paHm.js";import{T as $}from"./index-4sotxCPT.js";import{S as P}from"./index-19zJLVvd.js";import{R as D}from"./ArrowLeftOutlined-DPrGKClu.js";import{R as B}from"./EditOutlined-DBTY11ET.js";import{P as F}from"./index-ZmRHGv6C.js";import{R as M}from"./DeleteOutlined-BYdkwIHm.js";import{D as t}from"./index-BLQOqZEU.js";import{T as v}from"./index-CwdmVelz.js";import{I as w}from"./index-xjqdTS8d.js";import{D as E}from"./index-f4BpC47A.js";import{M as L}from"./index-Yxxb-zBk.js";import{R as z}from"./FilePdfOutlined-Bk0U6B6K.js";import{R as A}from"./FileOutlined-BQmENh8X.js";import"./UserOutlined-DbziX9m8.js";import"./index-BAJJZILe.js";import"./index-Dh1oKUG_.js";import"./EllipsisOutlined-BovgqE1k.js";import"./PurePanel-C84SwQv1.js";import"./InboxOutlined-DQe2Aezk.js";import"./DownOutlined-Bh2zEb-F.js";import"./useVariants-CY_Kcp5K.js";import"./getAllowClear-DfqxFJiv.js";import"./CheckOutlined-bJGhASa0.js";import"./EyeOutlined-Mb1FRF2d.js";import"./addEventListener-sAx3j2N4.js";const{Title:Q,Text:f}=$;function V({seller:i,documents:r}){const[_,u]=d.useState(!1),[n,I]=d.useState(""),[m,C]=d.useState(""),R=async()=>{try{await T.delete(`/api/sellers/${i.id}`),x.visit(route("data-entry.sellers.index"),{onSuccess:()=>{h.success("អ្នកលក់ត្រូវបានលុបដោយជោគជ័យ")}})}catch(s){console.error("Error deleting seller:",s),s.response&&s.response.status===403?h.error("អ្នកមិនមានសិទ្ធិលុបទិន្នន័យអ្នកលក់"):h.error("មានបញ្ហាក្នុងការលុបអ្នកលក់")}},c=s=>{I(`/storage/${s.file_path}`),C(s.file_name),u(!0)},g=s=>{const o=s.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(o)?null:o==="pdf"?e.jsx(z,{style:{fontSize:"24px"}}):e.jsx(A,{style:{fontSize:"24px"}})},y=s=>{const o=s.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(o)};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"ព័ត៌មានលម្អិតអ្នកលក់"}),e.jsxs("div",{className:"seller-show",children:[e.jsx(k,{items:[{title:e.jsx(b,{href:route("data-entry.index"),children:"ជ្រើសរើសប្រភេទទិន្នន័យ"})},{title:e.jsx(b,{href:route("data-entry.sellers.index"),children:"បញ្ជីអ្នកលក់"})},{title:"ព័ត៌មានលម្អិតអ្នកលក់"}],className:"mb-6"}),e.jsxs(l,{children:[e.jsxs(j,{justify:"space-between",align:"middle",className:"mb-6",children:[e.jsx(a,{children:e.jsx(Q,{level:4,className:"khmer-heading m-0",children:"ព័ត៌មានលម្អិតអ្នកលក់"})}),e.jsx(a,{children:e.jsxs(P,{children:[e.jsx(p,{icon:e.jsx(D,{}),onClick:()=>x.visit(route("data-entry.sellers.index")),children:"ត្រឡប់ក្រោយ"}),e.jsx(p,{type:"primary",icon:e.jsx(B,{}),onClick:()=>x.visit(route("data-entry.sellers.edit",i.id)),children:"កែប្រែ"}),e.jsx(F,{title:"តើអ្នកពិតជាចង់លុបអ្នកលក់នេះមែនទេ?",onConfirm:R,okText:"យល់ព្រម",cancelText:"បោះបង់",children:e.jsx(p,{danger:!0,icon:e.jsx(M,{}),children:"លុប"})})]})})]}),e.jsxs(j,{gutter:[24,24],children:[e.jsx(a,{xs:24,md:16,children:e.jsx(l,{title:"ព័ត៌មានអ្នកលក់",className:"mb-6",children:e.jsxs(t,{bordered:!0,column:{xs:1,sm:2},children:[e.jsx(t.Item,{label:"ឈ្មោះ",children:i.name}),e.jsx(t.Item,{label:"ភេទ",children:e.jsx(v,{color:i.sex==="male"?"blue":"pink",children:i.sex==="male"?"ប្រុស":"ស្រី"})}),e.jsx(t.Item,{label:"ថ្ងៃខែឆ្នាំកំណើត",children:i.date_of_birth}),e.jsx(t.Item,{label:"លេខអត្តសញ្ញាណប័ណ្ណ",children:i.identity_number}),e.jsx(t.Item,{label:"អាសយដ្ឋាន",span:2,children:i.address}),e.jsx(t.Item,{label:"លេខទូរស័ព្ទ",children:i.phone_number}),e.jsx(t.Item,{label:"បង្កើតនៅ",children:i.created_at}),e.jsx(t.Item,{label:"កែប្រែនៅ",children:i.updated_at})]})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(l,{title:"កិច្ចសន្យាបង្ហាញ",className:"mb-6",children:r&&r.filter(s=>s.is_display).length>0?r.filter(s=>s.is_display).map(s=>e.jsx("div",{className:"display-document",children:y(s.file_name)?e.jsx(w,{src:`/storage/${s.file_path}`,alt:s.file_name,style:{width:"100%"},preview:!1,onClick:()=>c(s)}):e.jsxs("div",{className:"document-preview-box",onClick:()=>c(s),children:[g(s.file_name),e.jsx(f,{children:s.file_name})]})},s.id)):e.jsx(f,{type:"secondary",children:"គ្មានកិច្ចសន្យាបង្ហាញ"})})})]}),e.jsx(E,{}),e.jsx(l,{title:"កិច្ចសន្យាទាំងអស់",children:e.jsx(j,{gutter:[16,16],children:r&&r.length>0?r.map(s=>e.jsx(a,{xs:24,sm:12,md:8,lg:6,children:e.jsx(l,{hoverable:!0,cover:y(s.file_name)?e.jsx(w,{src:`/storage/${s.file_path}`,alt:s.file_name,style:{height:150,objectFit:"cover"},preview:!1}):e.jsx("div",{className:"document-icon-container",children:g(s.file_name)}),onClick:()=>c(s),children:e.jsx(l.Meta,{title:s.file_name,description:e.jsx(e.Fragment,{children:s.is_display&&e.jsx(v,{color:"blue",children:"កិច្ចសន្យាបង្ហាញ"})})})})},s.id)):e.jsx(a,{span:24,children:e.jsx(f,{type:"secondary",children:"គ្មានកិច្ចសន្យា"})})})})]}),e.jsx(L,{open:_,title:m,footer:null,onCancel:()=>u(!1),width:800,children:n&&(n.endsWith(".pdf")?e.jsx("iframe",{src:n,style:{width:"100%",height:"500px"},title:m}):e.jsx("img",{alt:m,style:{width:"100%"},src:n}))})]})]})}V.layout=i=>e.jsx(N,{title:"ព័ត៌មានលម្អិតអ្នកលក់",children:i});export{V as default};
