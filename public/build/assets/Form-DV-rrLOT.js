import{r as p,j as e,Q as w,t as S,d as R,S as T}from"./app-D0OhDuOP.js";import{A as $}from"./AdminLayout-DfyZC7U7.js";import{F as B}from"./FileUpload-C1UEOMq6.js";import{d as O}from"./dayjs.min-Bgh6-5v4.js";import{F as o}from"./index-01QrSur2.js";import{T as A}from"./index-DUD5X347.js";import{R as L}from"./FileOutlined-CmtzEeI9.js";import{I as x}from"./index-DyIYvMCA.js";import{S as g}from"./index-BXlDNFm_.js";import{D as Q}from"./index-C98K_sL4.js";import{R as P}from"./UserOutlined-Bw1Yg3TV.js";import{C as b}from"./index-BXZQm44E.js";import{R as Y,C as l}from"./row-Cvvd4www.js";import{R as U}from"./CheckOutlined-C-W3vkf9.js";import{B as z}from"./Breadcrumb-XIs-K6bQ.js";import{S as D}from"./index-DeYg2bFH.js";import{D as G}from"./index-BoUcoXbW.js";import{B as v}from"./index-XQ9uBlxv.js";import{R as H}from"./ArrowLeftOutlined-DaEIyD4l.js";import{R as J}from"./SaveOutlined-D-cLyBdL.js";import{s as N}from"./index-VXrvBi_7.js";import"./index-BKPGZTnh.js";import"./EllipsisOutlined-BcUT9_x5.js";import"./PurePanel-BrlMViLC.js";import"./index-CpY42lHj.js";import"./index-DxlGwFBo.js";import"./useClosable-rmjEiMr1.js";import"./CloseOutlined-CSg-7HVH.js";import"./pickAttrs-BMtZpb9Y.js";import"./extendsObject-78o_rR5W.js";import"./EyeOutlined-Bk9sN1n5.js";import"./CheckCircleOutlined-_P5yC29H.js";import"./index-DSx0c0nZ.js";import"./ExclamationCircleFilled-BuCwC-hN.js";import"./InfoCircleFilled-Csbq1HVY.js";import"./ActionButton-DPI_9ZHB.js";import"./Skeleton-BB1PfEPR.js";import"./index-BNYa27A7.js";import"./DeleteOutlined-C5fTVnAq.js";import"./FilePdfOutlined-BmX1d_m5.js";import"./FileImageOutlined-6X7nxdKY.js";import"./index-FPFFDuuk.js";import"./DownloadOutlined-BFocYQwA.js";import"./progress-CZwQN1Wi.js";import"./index-Bjcdw0HM.js";import"./UploadOutlined-qPHS_ZnN.js";import"./EditOutlined-BQAB7wjt.js";import"./getAllowClear-7r21EHJH.js";import"./useVariants-VmmnPvRy.js";import"./Input-DIi4XD1o.js";import"./SearchOutlined-DdbS1Qlk.js";import"./useIcons-De8HtjeC.js";import"./DownOutlined-BKT6hG3e.js";import"./CalendarOutlined-C5Gy31PM.js";import"./ClockCircleOutlined-BGruiaAm.js";const{Title:j,Text:i}=A,{Step:Xe}=D;function K({seller:s,documents:c}){var _;const[r]=o.useForm(),[n,y]=p.useState(0),[C,F]=p.useState(!1),[u,k]=p.useState([]),d=!!s;p.useEffect(()=>{s&&(r.setFieldsValue({...s,date_of_birth:s.date_of_birth?O(s.date_of_birth):null}),c&&k(c))},[s,c]);const E=t=>{k(t)},V=async t=>{F(!0);try{const a={...t,date_of_birth:t.date_of_birth?t.date_of_birth.format("YYYY-MM-DD"):null,documents:u};let m;d?(m=await R.put(`/api/sellers/${s.id}`,a),N.success("ព័ត៌មានអ្នកលក់ត្រូវបានកែប្រែដោយជោគជ័យ")):(m=await R.post("/api/sellers",a),N.success("ព័ត៌មានអ្នកលក់ត្រូវបានបង្កើតដោយជោគជ័យ")),T.visit(route("data-entry.sellers.index"))}catch(a){if(console.error("Error saving seller:",a),a.response&&a.response.data&&a.response.data.errors){const m=a.response.data.errors,I={};Object.keys(m).forEach(f=>{I[f]={name:f,errors:[m[f][0]]}}),r.setFields(Object.values(I))}else N.error("មានបញ្ហាក្នុងការរក្សាទុកព័ត៌មានអ្នកលក់")}finally{F(!1)}},M=()=>{r.validateFields().then(()=>{y(n+1)}).catch(t=>{console.log("Validation failed:",t)})},q=()=>{y(n-1)},h=[{title:"ឯកសារ",icon:e.jsx(L,{}),content:e.jsxs("div",{className:"document-step",children:[e.jsx(B,{category:"seller",referenceId:s==null?void 0:s.id,initialFiles:c||[],onFilesChange:E,maxFiles:4}),e.jsx("div",{className:"mt-6",children:e.jsx(i,{type:"danger",className:"khmer-text",children:"* សូមផ្ទុកឡើងយ៉ាងហោចណាស់ឯកសារមួយ និងកំណត់ឯកសារមួយជាឯកសារបង្ហាញ"})})]})},{title:"ព័ត៌មានអ្នកលក់",icon:e.jsx(P,{}),content:e.jsxs("div",{className:"seller-info-step",children:[e.jsx(o.Item,{label:"ឈ្មោះ",name:"name",rules:[{required:!0,message:"សូមបញ្ចូលឈ្មោះ"}],children:e.jsx(x,{placeholder:"បញ្ចូលឈ្មោះ"})}),e.jsx(o.Item,{label:"ភេទ",name:"sex",rules:[{required:!0,message:"សូមជ្រើសរើសភេទ"}],children:e.jsxs(g,{placeholder:"ជ្រើសរើសភេទ",children:[e.jsx(g.Option,{value:"male",children:"ប្រុស"}),e.jsx(g.Option,{value:"female",children:"ស្រី"})]})}),e.jsx(o.Item,{label:"ថ្ងៃខែឆ្នាំកំណើត",name:"date_of_birth",rules:[{required:!0,message:"សូមជ្រើសរើសថ្ងៃខែឆ្នាំកំណើត"}],children:e.jsx(Q,{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"ជ្រើសរើសថ្ងៃខែឆ្នាំកំណើត"})}),e.jsx(o.Item,{label:"លេខអត្តសញ្ញាណប័ណ្ណ",name:"identity_number",rules:[{required:!0,message:"សូមបញ្ចូលលេខអត្តសញ្ញាណប័ណ្ណ"}],children:e.jsx(x,{placeholder:"បញ្ចូលលេខអត្តសញ្ញាណប័ណ្ណ"})}),e.jsx(o.Item,{label:"អាសយដ្ឋាន",name:"address",rules:[{required:!0,message:"សូមបញ្ចូលអាសយដ្ឋាន"}],children:e.jsx(x.TextArea,{rows:4,placeholder:"បញ្ចូលអាសយដ្ឋាន"})}),e.jsx(o.Item,{label:"លេខទូរស័ព្ទ",name:"phone_number",rules:[{required:!0,message:"សូមបញ្ចូលលេខទូរស័ព្ទ"}],children:e.jsx(x,{placeholder:"បញ្ចូលលេខទូរស័ព្ទ"})})]})},{title:"បញ្ចប់",icon:e.jsx(U,{}),content:e.jsxs("div",{className:"confirmation-step",children:[e.jsx(j,{level:4,className:"khmer-heading mb-4",children:"បញ្ជាក់ព័ត៌មាន"}),e.jsx(i,{className:"khmer-text mb-6 block",children:"សូមពិនិត្យមើលព័ត៌មានដែលបានបញ្ចូលម្តងទៀត មុនពេលរក្សាទុក។"}),e.jsxs(b,{className:"mb-4",children:[e.jsx(j,{level:5,className:"khmer-heading mb-4",children:"ព័ត៌មានអ្នកលក់"}),e.jsxs(Y,{gutter:[16,16],children:[e.jsxs(l,{span:12,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"ឈ្មោះ:"}),e.jsx("div",{children:r.getFieldValue("name")})]}),e.jsxs(l,{span:12,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"ភេទ:"}),e.jsx("div",{children:r.getFieldValue("sex")==="male"?"ប្រុស":"ស្រី"})]}),e.jsxs(l,{span:12,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"ថ្ងៃខែឆ្នាំកំណើត:"}),e.jsx("div",{children:(_=r.getFieldValue("date_of_birth"))==null?void 0:_.format("YYYY-MM-DD")})]}),e.jsxs(l,{span:12,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"លេខអត្តសញ្ញាណប័ណ្ណ:"}),e.jsx("div",{children:r.getFieldValue("identity_number")})]}),e.jsxs(l,{span:24,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"អាសយដ្ឋាន:"}),e.jsx("div",{children:r.getFieldValue("address")})]}),e.jsxs(l,{span:12,children:[e.jsx(i,{strong:!0,className:"khmer-text",children:"លេខទូរស័ព្ទ:"}),e.jsx("div",{children:r.getFieldValue("phone_number")})]})]})]}),e.jsxs(b,{children:[e.jsx(j,{level:5,className:"khmer-heading mb-4",children:"ឯកសារ"}),e.jsxs(i,{className:"khmer-text mb-2 block",children:["ចំនួនឯកសារ: ",u.length]}),u.length===0&&e.jsx(i,{type:"danger",className:"khmer-text",children:"មិនមានឯកសារត្រូវបានផ្ទុកឡើងទេ"})]})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:d?"កែប្រែព័ត៌មានអ្នកលក់":"បង្កើតព័ត៌មានអ្នកលក់ថ្មី"}),e.jsxs("div",{className:"seller-form",children:[e.jsx(z,{items:[{title:e.jsx(S,{href:route("data-entry.index"),children:"ជ្រើសរើសប្រភេទទិន្នន័យ"})},{title:e.jsx(S,{href:route("data-entry.sellers.index"),children:"បញ្ជីអ្នកលក់"})},{title:d?"កែប្រែព័ត៌មានអ្នកលក់":"បង្កើតព័ត៌មានអ្នកលក់ថ្មី"}],className:"mb-6"}),e.jsxs(b,{children:[e.jsx(j,{level:4,className:"khmer-heading mb-6",children:d?"កែប្រែព័ត៌មានអ្នកលក់":"បង្កើតព័ត៌មានអ្នកលក់ថ្មី"}),e.jsx(D,{current:n,items:h.map(t=>({title:t.title,icon:t.icon})),className:"mb-8"}),e.jsxs(o,{form:r,layout:"vertical",onFinish:V,className:"mt-6",children:[e.jsx("div",{className:"steps-content",children:h[n].content}),e.jsx(G,{}),e.jsx("div",{className:"steps-action",children:e.jsxs(Y,{justify:"space-between",children:[e.jsx(l,{children:n>0&&e.jsx(v,{icon:e.jsx(H,{}),onClick:q,children:"ត្រឡប់ក្រោយ"})}),e.jsxs(l,{children:[n<h.length-1&&e.jsx(v,{type:"primary",onClick:M,children:"បន្ទាប់"}),n===h.length-1&&e.jsx(v,{type:"primary",icon:e.jsx(J,{}),loading:C,onClick:()=>r.submit(),children:"រក្សាទុក"})]})]})})]})]})]})]})}K.layout=s=>e.jsx($,{title:s.props.seller?"កែប្រែព័ត៌មានអ្នកលក់":"បង្កើតព័ត៌មានអ្នកលក់ថ្មី",children:s});export{K as default};
