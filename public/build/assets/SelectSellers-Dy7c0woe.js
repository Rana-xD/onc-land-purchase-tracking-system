import{r as l,j as e,Q as R,d as N}from"./app-D0OhDuOP.js";import{n}from"./numberUtils-DuaFS_6b.js";import{A as k,B as T,b as z}from"./AdminLayout-DfyZC7U7.js";import{C as d}from"./index-BXZQm44E.js";import{S as C}from"./index-DeYg2bFH.js";import{T as $}from"./index-DUD5X347.js";import{I as B}from"./index-DyIYvMCA.js";import{R as E}from"./SearchOutlined-DdbS1Qlk.js";import{F}from"./Table-CJMywyvl.js";import{B as u}from"./index-XQ9uBlxv.js";import{s as x}from"./index-VXrvBi_7.js";import{R as A}from"./UserOutlined-Bw1Yg3TV.js";import{R as L}from"./EnvironmentOutlined-C6fAnWDm.js";import{R as f}from"./DollarOutlined-BgkhO_OZ.js";import{R as P}from"./FileOutlined-CmtzEeI9.js";import"./index-BKPGZTnh.js";import"./EllipsisOutlined-BcUT9_x5.js";import"./PurePanel-BrlMViLC.js";import"./index-CpY42lHj.js";import"./index-BoUcoXbW.js";import"./Skeleton-BB1PfEPR.js";import"./CloseOutlined-CSg-7HVH.js";import"./useVariants-VmmnPvRy.js";import"./CheckOutlined-C-W3vkf9.js";import"./progress-CZwQN1Wi.js";import"./ExclamationCircleFilled-BuCwC-hN.js";import"./EditOutlined-BQAB7wjt.js";import"./getAllowClear-7r21EHJH.js";import"./Input-DIi4XD1o.js";import"./pickAttrs-BMtZpb9Y.js";import"./EyeOutlined-Bk9sN1n5.js";import"./addEventListener-Dvq9iQDE.js";import"./index-BXlDNFm_.js";import"./useIcons-De8HtjeC.js";import"./DownOutlined-BKT6hG3e.js";import"./index-CxyNWzZ_.js";import"./useBubbleLock-Dp5g0NxF.js";import"./index-HowiUfuo.js";import"./Pagination-C28t5-1k.js";import"./index-Bjcdw0HM.js";import"./extendsObject-78o_rR5W.js";import"./FolderOutlined-CsvjmU0T.js";import"./InfoCircleFilled-Csbq1HVY.js";const{Title:Q,Text:K}=$;function ze({document:r,sellers:h,selectedSellers:j}){const[y,m]=l.useState(!1),[s,p]=l.useState(j||[]),[a,b]=l.useState(""),g=h.filter(t=>{if(!a)return!0;const i=n(a),c=n(t.name),I=n(t.identity_number),v=n(t.phone_number);return c.includes(i)||I.includes(i)||v.includes(i)}),_=[{title:"ជ្រើសរើស",dataIndex:"id",key:"selection",render:t=>e.jsx("input",{type:"checkbox",checked:s.includes(t),onChange:i=>{i.target.checked?p([...s,t]):p(s.filter(c=>c!==t))}})},{title:"ឈ្មោះ",dataIndex:"name",key:"name"},{title:"លេខអត្តសញ្ញាណប័ណ្ណ",dataIndex:"identity_number",key:"identity_number"},{title:"លេខទូរស័ព្ទ",dataIndex:"phone_number",key:"phone_number"}],S=async()=>{if(s.length===0){x.error("សូមជ្រើសរើសយ៉ាងហោចណាស់មួយ");return}m(!0);try{const t=r.document_type==="deposit_contract"?"deposit-contracts":"sale-contracts";await N.post(`/api/${t}/${r.id}/select-sellers`,{seller_ids:s}),r.document_type==="deposit_contract"?window.location.href=route("deposit-contracts.select-lands",{id:r.id}):window.location.href=route("sale-contracts.select-lands",{id:r.id})}catch(t){console.error("Error selecting sellers:",t),x.error("មានបញ្ហាក្នុងការជ្រើសរើសអ្នកលក់")}finally{m(!1)}},w=1;r.document_type;const o=[{title:"ជ្រើសរើសអ្នកទិញ",icon:e.jsx(A,{})},{title:"ជ្រើសរើសអ្នកលក់",icon:e.jsx(z,{})},{title:"ជ្រើសរើសដី និងកំណត់តម្លៃ",icon:e.jsx(L,{})}];return r.document_type==="deposit_contract"?o.push({title:"កំណត់ការកក់ប្រាក់",icon:e.jsx(f,{})}):o.push({title:"ដំណាក់កាលបង់ប្រាក់",icon:e.jsx(f,{})}),o.push({title:"បង្កើតឯកសារ",icon:e.jsx(P,{})}),e.jsxs(k,{children:[e.jsx(R,{title:"ជ្រើសរើសអ្នកលក់"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx(d,{className:"mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(C,{current:w,items:o,responsive:!0,className:"site-navigation-steps",size:"small"})})}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(Q,{level:3,children:"ជ្រើសរើសអ្នកលក់"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"mr-2",children:"បានជ្រើសរើស"}),e.jsx(T,{count:s.length,showZero:!0,style:{marginTop:"0"}})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(B,{placeholder:"ស្វែងរកតាមឈ្មោះ លេខអត្តសញ្ញាណប័ណ្ណ ឬលេខទូរស័ព្ទ",prefix:e.jsx(E,{}),value:a,onChange:t=>b(t.target.value),style:{width:"100%"}})}),e.jsx(F,{rowKey:"id",columns:_,dataSource:g,pagination:{pageSize:10},rowClassName:t=>s.includes(t.id)?"bg-blue-50":""}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(u,{href:route(r.document_type==="deposit_contract"?"deposit-contracts.select-buyers":"sale-contracts.select-buyers",{id:r.id}),children:"ត្រឡប់"}),e.jsx(u,{type:"primary",onClick:S,loading:y,disabled:s.length===0,children:"បន្ត"})]})]})]})]})}export{ze as default};
